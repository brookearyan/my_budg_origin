<!DOCTYPE html>
<html>
  <head>
    <head>
    <style media="screen">
      body {
        background-color: #FAFBFC;
      }

      .row {
        font-family: 'Open Sans', sans-serif;
        color: #263675;
        font-size: 16px;
      }

      .btn {
        font-family: 'Lora', serif;
        background-color: #808080;
        text-align: center;
        font-size: 16px;
      }
      h1, h2, h4, h5 {
        font-family: 'Lora', serif;
        color: #808080;
      }

      a:hover {
        text-decoration: none;
        background-color: #808080;
        color: black;
      }

      h1 {
        margin-top: 24px;
        font-size: 30px;
        text-align: center;
        color: #C0C0C0;
      }

      p {
      font-family: 'Lora', serif;
      color: #808080;
      margin-left: 8px;
      margin-right: 10px;
      font-size: 18px;
      }

      p a {
        color: #263675;
      }
    </style>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <link rel="stylesheet" type="text/css" href="index.scss">
      <meta charset="utf-8">
    <title>add new expense</title>
  </head>
      <body>
        <div class="row">
          <div class="col-md-6 col-md-offset-3">
          <br><h1>add new expense</h1><br>
            <%= form_for(@expense) do |f| %>
            <%= f.label :name, "name" %>
            <%= f.text_field :name, class: 'form-control'  %><br>
            <%= f.select :expense_type, [ 'entertainment', 'restaurants/takeout', 'clothing/cosmetics', 'transportation', 'groceries' ] %>
            <br><br><%= f.label :cost, "cost" %>
            <%= f.text_field :cost, class: 'form-control'  %><br>
            <%= f.label :start_time, "payment due" %>
            <%= f.text_field :start_time, class: 'form-control'  %><br>
            <%= f.hidden_field :user_id, :value => current_user.id %>
            <%= f.submit "add expense" , class: 'btn btn-primary' %><br>
            <% end %>
          </div>
        </div>
        <div class="col-sp-6">
          <table id="expense-result"></table>
        </div>
        <script type="text/javascript" charset="utf-8">
          $(function () {
            $('form').submit(function(event) {

              event.preventDefault();

              var values = $(this).serialize();

              var posting = $.post('/expenses', values);

              posting.done(posting => {
                let markup =
                `<tr>
                  <td colspan="2">${posting.name}</td>
                </tr>
                <tr>
                  <td> expense_type: </td><td>${posting.expense_type}</td>
                </tr>
                <tr>
                  <td> cost: </td><td>${posting.cost}</td>
                </tr>
                <tr>
                  <td> payment date: </td><td>${posting.start_time}</td>
                </tr>`;
                $('#expense-result').append(markup);
              });
              $('form')[0].reset();
            });
          });
        </script>
    </body>
</html>
